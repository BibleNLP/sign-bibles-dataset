resources:
  cloud: lambda
  accelerators: GH200:1   # 1x GPU(96 GB), 64 vCPUs, 432 GB RAM, 4 TB SSD
  region: us-east-3

workdir: ./lambda

# Mount an existing R2 bucket
file_mounts:
  /my_data:
    source: r2://,
    bucket: isl-dataset-prep,
    mode: MOUNT  # MOUNT or COPY or MOUNT_CACHED. Defaults to MOUNT. Optional.


setup: |
  pip install --upgrade pip
  pip install -r requirements-dwpose-on_GPU.txt
  sudo apt-get install -y parallel
  cp /my_data/dw-ll_ucoco_384.onnx scripts/ckpts/
  cp /my_data/yolox_l.onnx scripts/ckpts/

run: |
  mkdir -p /my_data/logs
  bash scripts/parallel_run.sh
